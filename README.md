# thirdwatch-php
The first version of the Thirdwatch API is an exciting step forward towards making it easier for developers to pass data to Thirdwatch.  Once you've [registered your website/app](https://thirdwatch.ai) it's easy to start sending data to Thirdwatch.  All endpoints are only accessible via https and are located at `api.thirdwatch.ai`. For instance: you can send event at the moment by ```HTTP POST``` Request to the following URL with your API key in ```Header``` and ```JSON``` data in request body. ```   https://api.thirdwatch.ai/event/v1 ``` Every API request must contain ```API Key``` in header value ```X-THIRDWATCH-API-KEY```  Every event must contain your ```_userId``` (if this is not available, you can alternatively provide a ```_sessionId``` value also in ```_userId```).  JavaScript Fingerprinting module for capturing unique devices and tracking user interaction.  This script will identify unique devices with respect to the browser. For e.g., if chrome is opened in normal mode a unique device id is generated and this will be same if chrome is opened in incognito mode or reinstalled.  Paste the below script onto your webpage, just after the opening `<body>` tag. This script should be added to the page which is accessed externally by the user of your website. For e.g., If you want to track three different webpages then paste the below script onto each webpage, just after the opening `<body>` tag. This script should not be added onto internal tools or admin panels. ```   &lt;script id=\"thirdwatch\"     data-session-cookie-name=\"&lt;cookie_name&gt;\"     data-session-id-value=\"&lt;session_id&gt;\"     data-user-id=\"&lt;user_id&gt;\"     data-app-secret=\"&lt;app_secret&gt;\"     data-is-track-pageview=\"true\"&gt; (function() {         var loadDeviceJs = function() {         var element = document.createElement(\"script\");         element.async = 1;         element.src = \"https://cdn.thirdwatch.ai/tw.min.js\";         document.body.appendChild(element);         };         if (window.addEventListener) {              window.addEventListener(\"load\", loadDeviceJs, false);         } else if (window.attachEvent) {         window.attachEvent(\"onload\", loadDeviceJs);         }     })();   &lt;/script&gt; ``` * `data-session-cookie-name` -- The cookie name where you are saving the unique session id. We will pick the session id by reading its value from the cookie name. (Optional) * `data-session-id-value` -- In case you are not passing `data-session-cookie-name` than you can put session id directly in this parameter. In absence of both `data-session-cookie-name` and `data-session-id-value`, our system will generate a session Id. (Optional) * `data-user-id` -- Unique user id at your end. This can be email id or primary key in the database. In case of guest user, you can insert session Id here. * `data-app-secret` -- Unique App secret generated for you by Thirdwatch. * `data-is-track-pageview` -- If this is set to true, then the url on which this script is running will be sent to Thirdwatch, else the url will not be captured.   The Score API is use to get an up to date cutomer trust score after you have sent transaction event and order successful. This API will provide the riskiness score of the order with reasons. Some examples of when you may want to check the score are before:    - Before Shippement of a package   - Finalizing a money transfer   - Giving access to a prearranged vacation rental   - Sending voucher on mail  ```   https://api.thirdwatch.ai/neo/v1/score?api_key=<your api key>&order_id=<Order id> ```  According to Score you can decide to take action Approve or Reject. Orders with score more than 70 will consider as Riskey orders. We'll provide some reasons also in rules section.   ``` {   \"order_id\": \"OCT45671\",   \"user_id\": \"ajay_245\",   \"order_timestamp\": \"2017-05-09T09:40:45.717Z\",   \"score\": 82,   \"flag\": \"red\",     -\"reasons\": [     {         \"name\": \"_numOfFailedTransactions\",         \"display_name\": \"Number of failed transactions\",         \"flag\": \"green\",         \"value\": \"0\",         \"is_display\": true       },       {         \"name\": \"_accountAge\",         \"display_name\": \"Account age\",         \"flag\": \"red\",         \"value\": \"0\",         \"is_display\": true       },       {         \"name\": \"_numOfOrderSameIp\",         \"display_name\": \"Number of orders from same IP\",         \"flag\": \"red\",         \"value\": \"11\",         \"is_display\": true       }     ] } ```

This PHP package is automatically generated by the [Swagger Codegen](https://github.com/swagger-api/swagger-codegen) project:

- API version: 0.0.1
- Package version: 0.0.1
- Build package: io.swagger.codegen.languages.PhpClientCodegen

## Requirements

PHP 5.4.0 and later

## Installation & Usage
### Composer

To install the bindings via [Composer](http://getcomposer.org/), add the following to `composer.json`:

```
{
  "repositories": [
    {
      "type": "git",
      "url": "https://github.com/thirdwatch/thirdwatch-php.git"
    }
  ],
  "require": {
    "thirdwatch/thirdwatch-php": "*@dev"
  }
}
```

Then run `composer install`

### Manual Installation

Download the files and include `autoload.php`:

```php
    require_once('/path/to/thirdwatch-php/autoload.php');
```

## Tests

To run the unit tests:

```
composer install
./vendor/bin/phpunit
```

## Getting Started

Please follow the [installation procedure](#installation--usage) and then run the following:

```php
<?php
require_once(__DIR__ . '/vendor/autoload.php');

// Configure API key authorization: api_key
ai.thirdwatch\Configuration::getDefaultConfiguration()->setApiKey('X-THIRDWATCH-API-KEY', 'YOUR_API_KEY');
// Uncomment below to setup prefix (e.g. Bearer) for API key, if needed
// ai.thirdwatch\Configuration::getDefaultConfiguration()->setApiKeyPrefix('X-THIRDWATCH-API-KEY', 'Bearer');

$api_instance = new ai.thirdwatch\Api\AddPromotionApi();
$jSON = new \ai.thirdwatch\Model\AddPromotion(); // \ai.thirdwatch\Model\AddPromotion | Pass added promotion info to thirdwatch. Only `_userID` is required field. But this should contain promotion info.

try {
    $result = $api_instance->addPromotion($jSON);
    print_r($result);
} catch (Exception $e) {
    echo 'Exception when calling AddPromotionApi->addPromotion: ', $e->getMessage(), PHP_EOL;
}

?>
```

## Documentation for API Endpoints

All URIs are relative to *https://localhost/event*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*AddPromotionApi* | [**addPromotion**](docs/Api/AddPromotionApi.md#addpromotion) | **POST** /v1/add_promotion | Use add_promotion to record when a user adds one or more promotions to their account.
*AddToCartApi* | [**addToCart**](docs/Api/AddToCartApi.md#addtocart) | **POST** /v1/add_to_cart | Use add_to_cart when a user adds an item to their shopping cart or list.
*ChargebackApi* | [**chargeback**](docs/Api/ChargebackApi.md#chargeback) | **POST** /v1/chargeback | Use chargeback to capture a chargeback reported on a transaction. This event can be called multiple times to record changes to the chargeback state.
*CreateAccountApi* | [**createAccount**](docs/Api/CreateAccountApi.md#createaccount) | **POST** /v1/create_account | Use create_account to pass user details at user registration.
*CreateOrderApi* | [**createOrder**](docs/Api/CreateOrderApi.md#createorder) | **POST** /v1/createOrder | Submit a new or existing order to Thirdwatch for review. This API should contain order item info, the payment info, and user identity info.
*CustomEventApi* | [**customEvent**](docs/Api/CustomEventApi.md#customevent) | **POST** /v1/custom_event | Use order_status to track the order processing workflow of a previously submitted order.
*ItemStatusApi* | [**itemStatus**](docs/Api/ItemStatusApi.md#itemstatus) | **POST** /v1/item_status | Use item_status to update the status of item that you’ve already pass to Thirdwatch.
*LinkSessionToUserApi* | [**linkSessionToUser**](docs/Api/LinkSessionToUserApi.md#linksessiontouser) | **POST** /v1/link_session_to_user | Use link_session_to_user to associate specific session to a user. Generally used only in anonymous checkout workflows.
*LoginApi* | [**login**](docs/Api/LoginApi.md#login) | **POST** /v1/login | Use login to record when a user attempts to log in.
*LogoutApi* | [**logout**](docs/Api/LogoutApi.md#logout) | **POST** /v1/logout | Use logout to record when a user logs out.
*OrderStatusApi* | [**orderStatus**](docs/Api/OrderStatusApi.md#orderstatus) | **POST** /v1/order_status | Use order_status to track the order processing workflow of a previously submitted order.
*RemoveFromCartApi* | [**removeFromCart**](docs/Api/RemoveFromCartApi.md#removefromcart) | **POST** /v1/remove_from_cart | Use remove_from_cart when a user removes an item from their shopping cart or list.
*ReportItemApi* | [**reportItem**](docs/Api/ReportItemApi.md#reportitem) | **POST** /v1/report_item | Use report_item to let us know when another user reports that this item may violate your company’s policies.
*SendMessageApi* | [**sendMessage**](docs/Api/SendMessageApi.md#sendmessage) | **POST** /v1/send_message | Use send_message to record when a user sends a message to other i.e. seller, support.
*SubmitReviewApi* | [**submitReview**](docs/Api/SubmitReviewApi.md#submitreview) | **POST** /v1/submit_review | Use submit_review when a user-submitted review of a product or seller.
*TagAPIApi* | [**tagUser**](docs/Api/TagAPIApi.md#taguser) | **POST** /v1/tag | The Tag API enables you to tell Thirdwatch which of your users are bad and which are good.
*TransactionApi* | [**transaction**](docs/Api/TransactionApi.md#transaction) | **POST** /v1/transaction | Use transaction to record attempts results to Pay, Transfer money, Refund or other transactions.
*UntagAPIApi* | [**unTagUser**](docs/Api/UntagAPIApi.md#untaguser) | **POST** /v1/untag | If you are unsure whether a user is bad or good, you can always remove tag and leave the user in a neutral state.
*UpdateAccountApi* | [**updateAccount**](docs/Api/UpdateAccountApi.md#updateaccount) | **POST** /v1/update_account | Use update_account to record changes to the user&#39;s account information.
*UpdateOrderApi* | [**updateOrder**](docs/Api/UpdateOrderApi.md#updateorder) | **POST** /v1/update_order | Update details of an existing order.


## Documentation For Models

 - [AddPromotion](docs/Model/AddPromotion.md)
 - [AddToCart](docs/Model/AddToCart.md)
 - [BillingAddress](docs/Model/BillingAddress.md)
 - [Chargeback](docs/Model/Chargeback.md)
 - [CreateAccount](docs/Model/CreateAccount.md)
 - [CreateOrder](docs/Model/CreateOrder.md)
 - [Custom](docs/Model/Custom.md)
 - [CustomInfo](docs/Model/CustomInfo.md)
 - [ErrorResponse](docs/Model/ErrorResponse.md)
 - [EventResponse](docs/Model/EventResponse.md)
 - [Item](docs/Model/Item.md)
 - [ItemStatus](docs/Model/ItemStatus.md)
 - [LinkSessionToUser](docs/Model/LinkSessionToUser.md)
 - [Login](docs/Model/Login.md)
 - [Logout](docs/Model/Logout.md)
 - [OrderStatus](docs/Model/OrderStatus.md)
 - [PaymentMethod](docs/Model/PaymentMethod.md)
 - [Promotion](docs/Model/Promotion.md)
 - [RemoveFromCart](docs/Model/RemoveFromCart.md)
 - [ReportItem](docs/Model/ReportItem.md)
 - [Seller](docs/Model/Seller.md)
 - [SendMessage](docs/Model/SendMessage.md)
 - [ShippingAddress](docs/Model/ShippingAddress.md)
 - [SubmitReview](docs/Model/SubmitReview.md)
 - [Tag](docs/Model/Tag.md)
 - [Transaction](docs/Model/Transaction.md)
 - [UnTag](docs/Model/UnTag.md)
 - [UpdateAccount](docs/Model/UpdateAccount.md)
 - [UpdateOrder](docs/Model/UpdateOrder.md)


## Documentation For Authorization


## api_key

- **Type**: API key
- **API key parameter name**: X-THIRDWATCH-API-KEY
- **Location**: HTTP header


## Author




